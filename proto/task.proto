syntax = "proto3";

package task;

service TaskDistributor {
    rpc Ping(PingRequest) returns (PingResponse);
    rpc SubmitTask(SubmitTaskRequest) returns (SubmitTaskResponse);
    rpc FetchTask(FetchTaskRequest) returns (FetchTaskResponse);
}

message PingRequest {
    string message = 1;
}

message PingResponse {
    string message = 1;
    string timestamp = 2;
}

message SubmitTaskRequest {
    string user_tier = 1;  // "paid" or "free"
    int32 est_processing_time = 2;  // seconds
    string data = 3;  // task payload
}

message SubmitTaskResponse {
    string task_id = 1;
    string status = 2;  // "enqueued"
    int32 queue_position = 3;
}

message FetchTaskRequest {
    string agent_id = 1;  // ID of the agent requesting work
}

message FetchTaskResponse {
    bool has_task = 1;                    // true if task available, false if queue empty
    string task_id = 2;                   // task identifier
    string user_tier = 3;                 // "paid" or "free"
    int32 est_processing_time = 4;        // seconds
    string data = 5;                      // task payload
}